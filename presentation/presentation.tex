% Note: This file intended to be included in one of the two wrapper files in this directory.
% Hence, it has no document class.

\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{minted}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{adjustbox}
\usepackage{pdfpages}

\usetheme{Madrid}
\useinnertheme{circles}
\definecolor{ssgreen}{HTML}{669B41}
\definecolor{cablue}{RGB}{98, 175, 192}

\usecolortheme[named=ssgreen]{structure}
%\usecolortheme[named=cablue]{structure}

%Change link colors, except for navigation links...
\definecolor{links}{HTML}{2A1B81}
\hypersetup{colorlinks,linkcolor=,urlcolor=links}
%And, except for footer links
\addtobeamertemplate{footline}{\hypersetup{allcolors=.}}{}

\setbeamertemplate{navigation symbols}{}
\setlength{\columnseprule}{0.4pt}

\AtBeginEnvironment{frame}{\setcounter{footnote}{0}}

\title[JVM CLI]{JVM CLI Programs with GraalVM}
\author[Ed MacDonald]{Ed MacDonald}
\institute{www.solutionstreet.com}
%\institute{www.consartist.com}
\date{November 2025}

%\titlegraphic{ \includegraphics[width=2cm]{logo} }

% loto: LOng Talk Only
% lito: LIghtning Talk Only
\includeonlyframes{all,loto}

\begin{document}
    \begin{frame}[label=all]
        \titlepage
    \end{frame}

    \begin{frame}[label=loto]
        \frametitle{Solution Street}
        \begin{columns}
            \begin{column}{0.75\textwidth}
                \textbf{Ed MacDonald} - emacdonald@solutionstreet.com

                \vspace{1em}

                ~~ We are run by software engineers!

                ~~~~ Mostly commercial clients

                ~~~~~~ Work with the best engineers

                ~~~~~~~~ All tech stacks!

                ~~~~~~~~~~ HQ in Herndonâ€¦.We are Hiring!

                \vspace{1em}

                \textbf{Find me after to learn about us}
            \end{column}
            \begin{column}{0.25\textwidth}
                \includegraphics[width=\textwidth,height=0.85\textheight,keepaspectratio]{graphics/Headshot}
            \end{column}
        \end{columns}
    \end{frame}

    %\begin{frame}[plain,label=all]
    %    \centering
    %    \includegraphics[height=\textheight]{NovaSartNov2025.pdf}
    %\end{frame}


    \begin{frame}[label=all]
        \frametitle{Why the JVM?}
        \begin{itemize}
            \item{Reuse the JVM code already in your organization.}
            \item<2->{Reuse the vast amount of Open Source JVM code.}
            \item<3->{Language choices!\pause
                \begin{itemize}
                    \item<4->{Java}
                    \item<4->{Kotlin}
                    \item<4->{Groovy}
                    \item<4->{Scala}
                    \item<4->{Clojure}
                    \item<5->{Java + Kotlin Joint Compilation}
                    \item<5->{Java + Scala Joint Compilation}
                \end{itemize}
            }\pause

        \end{itemize}
        \note<2->[item]{This project, although simple, was intended to push the bounds of what GraalVM would work with.}
        \note<5->[item]{Joint compilation is not Cross Compilation.}
    \end{frame}

    \begin{frame}[label=all]
        \frametitle{Why GraalVM?}
        \begin{itemize}
            \item<1->{You can be just as cool as the Go and Rust folks (native binaries).}
            \item<2->{Faster startup (a must for CLI tools).}
        \end{itemize}
        \note<1->[item]{No Cross Compilation.}
    \end{frame}

    \begin{frame}[label=all]
        \frametitle{Gotchas}
        \begin{itemize}
            \item{GraalVM does static analysis, and gets rid of things it thinks aren't used.}
            \item{Static analysis doesn't find code called \emph{only} via reflection. (Use hints\footnotemark[1])}
            \item {Graal team maintains a lot of metadata for popular frameworks.\footnotemark[2]}
            \item {Graal team maintains a JVM agent that will generate metadata for you.\footnotemark[3]}
        \end{itemize}

        \note[item]{Bad news: A lot of Java frameworks depend on reflection.}
        \note[item]{Good news: The Graal team knows that and actively maintains metadata as part of the distro.}
        \note[item]{Good news: The error messages are actually good (helpful in creating your own metadata).}
        \note[item]{Good news: They have a JVM agent you can run your code with that will generate it for you.}

        \footnotetext[1]{\resizebox{\dimexpr\hsize-0.75em\relax}{!}{\url{https://www.graalvm.org/latest/reference-manual/native-image/metadata/\#reflection}}}
        \footnotetext[2]{\resizebox{\dimexpr\hsize-0.75em\relax}{!}{\url{https://github.com/oracle/graalvm-reachability-metadata/tree/master/metadata}}}
        \footnotetext[3]{\resizebox{\dimexpr\hsize-0.75em\relax}{!}{\url{https://www.graalvm.org/22.0/reference-manual/native-image/Agent/}}}

        %\item{org.graalvm.nativeimage.MissingReflectionRegistrationError: \\
        %   The program tried to reflectively invoke method \\
        %   public void net.edmacdonald.jvmcli.command.ShowHistory.setDirectory(java.lang.String) \\
        %   without it being registered for runtime reflection. \\
        %   Add public void net.edmacdonald.jvmcli.command.ShowHistory.setDirectory(java.lang.String) to the reflection metadata to solve this problem. \\
        %   See https://www.graalvm.org/latest/reference-manual/native-image/metadata/#reflection for help.}
    \end{frame}

    \begin{frame}[label=all]
        \frametitle{CLI Rules (My Soapbox)}
        \begin{itemize}
            \item<1->{Newline separated records}
            \item<2->{ONLY records on STDOUT. No field headings. Nothing else.}
            \item<3->{Whitespace separated fields}
            \item<4->{No intra-field whitespace except in last column}
        \end{itemize}
        \visible<5->{
            OR...\\
            Just output Json
        }
        \note<1->[item]{table stakes}
        \note<2->[item]{`docker ps`}
        \note<2->[item]{No one here who's ever used Java believes it can achieve this.}
        \note<3->[item]{can be read by a human, AND parsed by perl, awk, etc}
        \note<4->[item]{allows you to grab first n-1 columns easily; dump everything else into nth column}
        \note<5->[item]{See? I can adapt. All praise `jq`}
    \end{frame}

    \begin{frame}[label=all]
        \frametitle{Demo}
        Tech Stack (A true ``Enterprise Grade"\texttrademark{} CLI)
        \begin{itemize}
            \item{\href{https://www.graalvm.org/}{GraalVM}}
            \item{\href{https://www.java.com/en/}{Java}}
            \item{\href{https://www.scala-lang.org/}{Scala}}
            \item{\href{https://picocli.info/}{picocli}}
            \item{\href{https://spring.io/projects/spring-boot}{Spring Boot}}
            \item{\href{https://hibernate.org/}{Hibernate}}
            \item{\href{https://www.h2database.com/}{H2}}
            \item{\href{https://docs.liquibase.com/community}{Liquibase}}
            \item{\href{https://eclipse.dev/aspectj/}{AspectJ}}
        \end{itemize}
        \note{
            Note that every time we startup...
            \begin{itemize}
                \item{Spring is initialized}
                \item{Datbase migration necessity is evaluated}
                \item{Database connection created}
            \end{itemize}
            Notes:
            \begin{itemize}
                \item{sdk env install}
                \item{
                    scripts/run
                    \begin{itemize}
                        \item{fast}
                        \item{useful output; sent to STDERR}
                    \end{itemize}
                }
                \item{
                    scripts/run -h
                    \begin{itemize}
                        \item{useful output; sent to STDOUT}
                    \end{itemize}
                }
                \item{
                    scripts/run -v
                    \begin{itemize}
                        \item{It's still Java; It's still Spring}
                    \end{itemize}
                }
                \item{scripts/run filesys ls .}
                \item{scripts/run filesys find .}
                \item{scripts/run foobar fizzbuzz baz}
                \item{scripts/run history show}
            \end{itemize}
        }
    \end{frame}

    \begin{frame}[label=all]
        \frametitle{Summary}
        GraalVM:
        \begin{itemize}
            \item{Entire JVM Ecosystem}
            \item{Single Binary}
            \item{Fast Startup}
        \end{itemize}
    \end{frame}

    \begin{frame}[label=all]
        \begin{center}
            \Huge Questions?
        \end{center}
    \end{frame}

    \begin{frame}[label=all]
        \frametitle{Other Resources}
        Peripheral tools I used -- some of which warrant their own presentation
        \begin{itemize}
            \item \LaTeX: \href{https://www.latex-project.org}{https://www.latex-project.org}
            \item Beamer: \href{https://ctan.org/pkg/beamer}{https://ctan.org/pkg/beamer}
            \item Gradle: \href{https://gradle.org}{https://gradle.org}
        \end{itemize}
        GitHub repo
        \begin{itemize}
            \item \href{https://github.com/emacdona/jvmcliexample}{https://github.com/emacdona/jvmcliexample}
        \end{itemize}
    \end{frame}


\end{document}
